extends layout.pug

block content 
    .post__bookmark 
        i.far.fa-bookmark
    .post__title
        h2=post.title
    .container(data-id=post._id)
        .slide_wrap
            .slide
                each imageUrl in post.imagesUrl 
                    img(src=imageUrl, class="image")
                each videoUrl in post.videosUrl  
                    video(src=videoUrl, class="video", controls) 
    div 
        p=post.content 
        each hashtag in post.hashtags 
            a(href=`/search?keyword=` + hashtag.replace('#', '%23'))
                span.hashtag=hashtag
        br
        small=post.creationDate
    div 
        small
            a(href=`/users/${post.owner._id}`)=post.owner.nickname
            span 님이 업로드한 포스트
            br
            span 조회수 #{post.meta.views - 1} 
    if String(post.owner._id) === String(loggedInUser._id)
        a(href=`${post.id}/edit`) 포스트 수정
        br
        a(href=`${post.id}/delete`) 포스트 삭제
    if loggedIn
        .post__comments 
            form.post__comment-form#commentForm
                textarea(class="loggedin__textarea", cols="30", rows="10", placeholder="댓글을 입력하세요...")
                button 등록
    else 
        .post__add-comments 
            form.post__comment-form#commentForm
                textarea(readonly, cols="30", rows="10", placeholder="로그인 해주세요...")
                button(class="no__click") 등록
    .post__comments 
        ul 
            each comment in post.comments.reverse()
                li.post__comment(data-id=comment.id)
                    span 💛 #{comment.text} 
                    span 삭제


block script 
    script(src="/assets/js/postdetail.js")
    script(src="/assets/js/comment.js")